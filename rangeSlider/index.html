<!DOCTYPE html>
<html>
    <head>
        <title>Set Date Filter to Last N Periods </title>
        <script src="js\vendor\jquery-1.12.3.min.js"></script>
        <script src="js\vendor\moment.min.js"></script>
        <script src='js\ion.rangeSlider\ion.rangeSlider.js'></script>
       

        <link rel="stylesheet" type="text/css" href="css\ion.rangeSlider.css">
        <link rel="stylesheet" type="text/css" href="css\normalize.css">
				<link rel="stylesheet" href="css\ion.rangeSlider.skinTableau10.css" />



<style>

.slider-div
{
	margin-left:100px;
width:500px;

}
</style>


   <script>
                         
              var range; 
              var target;      
              var irs_min
              var date_format = "MMM DD, YYYY";
						
                $(document).ready(function () {

                  
                                     
                   $("#range_01").ionRangeSlider({
                    type: "double",
                    drag_interval: true,
  									hide_min_max: false,
								    hide_from_to: true,
									   
									  min: +moment().subtract(0.5, "year").format("X"),
                    max: +moment().format("X"),

								
										to: +moment().format("X"),
										from: +moment().subtract(1, "months").format("X"),

                    

										prettify: function (num) {
										     return moment(num, "X").format(date_format);
										    }

										});

                console.log("slider launched");

                change_trigger();

                                    });


              function change_trigger()
              {
                
               var irs_min = document.getElementById('irs-min');
               var irs_max = document.getElementById('irs-max');
               var target_div = document.getElementById('slider-results');
               var $range = $("#range_01"); //don't use getElementById. $() will call jquery object with more jQuery functions applicable

                $range.on('change', function(){

                    new_dates={};

                    new_dates.irs_min = moment($(this).data("from"),"X").format(date_format);
                    new_dates.irs_max = moment($(this).data("to"),"X").format(date_format);

                    //display on axis:

                    irs_min.textContent= new_dates.irs_min;
                    irs_max.textContent= new_dates.irs_max;

                    //display below
                    target_div.innerHTML = "date range from: "+ new_dates.irs_min +" to: "+ new_dates.irs_max;


                });


              }

  	                                </script>

    </head>	

    <body>

    <div class="wrapper">

		    <div class='slider-div'>
		  
		    <input id="range_01" />
			</div>

			<div id='slider-results'>
			</div>

	</div>
                             



    </body>
    </html>


