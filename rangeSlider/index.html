<!DOCTYPE html>
<html>
    <head>
        <title>Set Date Filter to Last N Periods </title>
        <script src="js\vendor\jquery-1.12.3.min.js"></script>
        <script src="js\vendor\moment.min.js"></script>
        <script src='js\ion.rangeSlider\ion.rangeSlider.js'></script>
       

        <link rel="stylesheet" type="text/css" href="css\ion.rangeSlider.css">
             <link rel="stylesheet" type="text/css" href="css\normalize.css">
				<link rel="stylesheet" href="css\ion.rangeSlider.skinTableau.css" />



<style>

.slider-div
{
	margin-left:100px;
width:500px;

}
</style>


   <script>
                         
              var range; 
              var target;      
              var oldFrom = 0;
              var oldTo = 0;  
              var irs_min = document.getElementById('irs-min')
						
                $(document).ready(function () {
                                     
                   $("#range_01").ionRangeSlider({
                    type: "double",
                    drag_interval: true,
  									hide_min_max: false,
								    hide_from_to: false,
									   
									  min: +moment().subtract(0.5, "year").format("X"),
                    max: +moment().format("X"),

								
										to: +moment().format("X"),
										from: +moment().subtract(1, "months").format("X"),

                    

									//	prettify: function (num) {
										//     return moment(num, "X").format("LL");
										 //   }

										});


                console.log("slider launched");
                //range = document.getElementById("range_01");

                after_load();

                //  console.log(range);

                                    });


              function after_load()
              {


               var $range = $("#range_01"); //don't use getElementByI. $() will call jquery object with more jQuery functions applicable

                $range.on('change', function(){

                    console.log("Saving value " + $(this).data("from"));
                   // $(this).data('val', $(this).val());
                    //target = document.getElementById('slider-results');
                    target = document.getElementById('irs-min');
                    target.textContent= $(this).data("from");


                });

/*
               $range.on("change",function(){
                 target = document.getElementById('slider-results');
                  min_label = document.getElementById('irs-min');

                  target.textContent= $(this).data("from");
                  min_label.textContent = $(this).data("from");

                //console.log("changed");
               });
*/
              }


console.log("testu");
var target = document.getElementById('slider-results');


range.addEventListener("change", function(e){alert("slider changed");});

                    /*
                             	var $range = $("#range_01");
										          var target = document.getElementById('slider-results');
										
									                                  
                      $range.on("change", function () {
                        	 console.log("changing");
                          	var target = document.getElementById('slider-results');
												    var $this = $(this),
											        from = $this.data("from"),
											        to = $this.data("to");
												        
											        from = new Date(from*1000);
											        to = new Date(to*1000);

											        to = moment(to).format('MM/DD/YYYY');
                              from = moment(from).format('MM/DD/YYYY');

												        var min_label = document.getElementById('irs-min');
												        var max_label = document.getElementById('irs-max');
														//$('.irs-max').replaceWith(to);
														min_label.innerHTML = from;
														max_label.innerHTML = to;
                            //max_label.textContent = to;
														

									
												    });
*/
										
                                   



							



                                    	
                                </script>

    </head>	

    <body>

    <div class="wrapper">

		    <div class='slider-div'>
		  
		    <input id="range_01" />
			</div>

			<div id='slider-results'>
			</div>

	</div>
                             



    </body>
    </html>


