<!DOCTYPE html>
<html>
    <head>
        <title>Set Date Filter to Last N Periods </title>
        <script src="js\vendor\jquery-1.12.3.min.js"></script>
        <script src="js\vendor\moment.min.js"></script>
        <script src='js\ion.rangeSlider\ion.rangeSlider.js'></script>
       

        <link rel="stylesheet" type="text/css" href="css\ion.rangeSlider.css">
      <!--  <link rel="stylesheet" type="text/css" href="css\normalize.css">-->
				<link rel="stylesheet" href="css\ion.rangeSlider.skinTableau10.css" />


      <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 


<style>

.irs-min, .irs-max {
font-size: 11px; line-height: 1.333;
font-family: 'Roboto', sans-serif;
}

.wrapper-div
{
    width: 80%;
    height: 1200px;
    margin: auto;
    padding: 0px;

}

  .tableau-viz-div
  {
    width: 660px;
    height: 1000px;
    float: left;
  }

  .slider-div
  {
    font-family: TrebuchetMS;
    margin-left: 660px;
    height: 1000px;
  }

  .slider-results
  {
  width:20px;
  }



</style>


   <script>
                         
              var range; 
              var target;      
              var irs_min
              var date_format = "MMM DD, YYYY";
						
                $(document).ready(function () {

                  
                                     
                   $("#range_01").ionRangeSlider({
                    type: "double",
                    drag_interval: true,
  									hide_min_max: false,
								    hide_from_to: true,
									   
									  min: +moment().subtract(0.5, "year").format("X"),
                    max: +moment().format("X"),

								
										to: +moment().format("X"),
										from: +moment().subtract(1, "months").format("X"),

                    

										prettify: function (num) {
										     return moment(num, "X").format(date_format);
										    }

										});

                console.log("slider launched");

                change_trigger();

                                    });


              function change_trigger()
              {
                
               var irs_min = document.getElementById('irs-min');
               var irs_max = document.getElementById('irs-max');
               var target_div = document.getElementById('slider-results');
               var $range = $("#range_01"); //don't use getElementById. $() will call jquery object with more jQuery functions applicable

                $range.on('change', function(){

                    new_dates={};

                    new_dates.irs_min = moment($(this).data("from"),"X").format(date_format);
                    new_dates.irs_max = moment($(this).data("to"),"X").format(date_format);

                    //display on axis:

                    irs_min.textContent= new_dates.irs_min;
                    irs_max.textContent= new_dates.irs_max;

                    //display below
                    target_div.innerHTML = "date range from: "+ new_dates.irs_min +" to: "+ new_dates.irs_max;


                });


              }

  	                                </script>

    </head>	

    <body>

    <section class="wrapper-div">
        <div class="tableau-viz-div">

<div class='tableauPlaceholder' id='viz1493808815777' style='position: relative'><noscript><a href='#'><img alt='Tourism Balance ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;To&#47;TourismBalance&#47;TourismBalance&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='TourismBalance&#47;TourismBalance' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;To&#47;TourismBalance&#47;TourismBalance&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1493808815777');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.minWidth='424px';vizElement.style.maxWidth='654px';vizElement.style.width='100%';vizElement.style.minHeight='629px';vizElement.style.maxHeight='929px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>


        </div>
		    <div class='slider-div'>
		  
		    <input id="range_01" />
			</div>

			<div id='slider-results'>
			</div>

	</section>
                             



    </body>
    </html>


